<div class="container">
  <div class="row mt-2">
    <ng-container [formGroup]="form">
      <ng-container formArrayName="priorities">
        <ng-container *ngFor="let task of taskService.tasks$ | async let i = index;">
          <div class="col-sm-4 d-flex p-2">
            <div class="card" [style.flex]="'auto'">
              <div class="card-header">
                <div class="d-flex justify-content-between">
                  <span>{{ task.status }}</span>
                  <span><small class="text-muted">{{ task.dateCreated | date }}</small></span>
                </div>
              </div>
              <div class="card-body d-flex flex-column justify-content-between">
                <div>
                  <h5 class="card-title">{{ task.name }}</h5>
                  <p class="card-subtitle mb-2 text-muted">{{ task.description || 'No description added.'}}</p>
                  <ngb-rating [(rate)]="task.priority" [readonly]="true"></ngb-rating>
                  <div [formGroupName]="i">
                    <label for="priority" class="form-label">Example range</label>
                    <input type="range" class="form-range" formControlName="priorityP">
                  </div>
                  <div class="text-end">
                  </div>
                </div>
                <div class="align-self-start">
                  <button class="btn text-danger" (click)="submit(i)">Change Task</button>
                </div>
                <div class="align-self-end">
                  <button class="btn text-danger" (click)="openDeleteModal(task, i)">Delete Task</button>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
      </ng-container>
    </ng-container>
  </div>
</div>
